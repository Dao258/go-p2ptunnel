## go-p2ptunnel

使用libp2p建立tcp隧道(不支持udp)，底层传输可以使用quic、tcp、ws、webtransport实现，自带nat，可以多层组合使用。

libp2p底层自带加密，同时有大量的libp2p节点，很容易寻找到相关节点。

服务端可以多开实例，避免出现 resource limit exceeded 错误(后续优化)

节点私钥文件在当前目录下 user.key

### 参数说明

l     监听或者转发的地址，如果没有设置id，就是转发这个地址，如果设置了，就是把远程端口映射到本地这个地址，默认值 127.0.0.1:10086

id    连接远程服务id

### 打开本地端口
`./go-p2ptunnel -l 127.0.0.1:3389`

注意这里会输出你的节点id，然后通过聊天软件发给你的朋友，这里假设id是12D3。

这里需要完整的ip加端口。

### 连接
`./go-p2ptunnel -id 12D3 -l 127.0.0.1:10089`

连接可能需要几秒到1分钟，连接成功后，就把远程端口映射到了 127.0.0.1:10089 

然后朋友在远程桌面连接 127.0.0.1:10089 即可。

### 打包

需要环境变量里面有upx，压缩二进制包

`goreleaser release --skip-publish  --rm-dist`

## 注意事项

1.本应用虽然使用的端对端加密，但是不保证传输数据的安全性，重要数据请勿使用本应用传递。

2.由于是p2p隧道，所以本程序会连接多个ip，如果介意，请使用frp。

3.如果有多个客户端连接，请加大服务端的最大文件数，不然可能导致连接数不够。

## 上游项目

[go-libp2p](https://github.com/libp2p/go-libp2p)